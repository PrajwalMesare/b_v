<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Vaiduu üíñ</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
            position: relative;
        }

        /* FIXED: Particles.js - Click-through */
        #particles-js {
            position: fixed !important; top: 0; left: 0;
            width: 100% !important; height: 100% !important;
            z-index: 0 !important; pointer-events: none !important;
        }
        #particles-js canvas { pointer-events: none !important; }

        #floatingHearts, #petalsContainer {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%; z-index: 10; pointer-events: none;
        }

        .progress-bar {
            position: fixed; top: 20px; left: 50%;
            transform: translateX(-50%); z-index: 100;
            width: 300px; height: 6px; background: rgba(255,255,255,0.3);
            border-radius: 3px; overflow: hidden;
        }
        .progress { height: 100%; background: linear-gradient(90deg, #ff4081, #d81b60); width: 0%; }

        .container {
            max-width: 800px; margin: 0 auto; padding: 100px 20px 40px;
            position: relative; z-index: 20;
        }

        .step {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(20px); border-radius: 30px;
            padding: 50px 40px; margin-bottom: 30px; text-align: center;
            box-shadow: 0 25px 50px rgba(0,0,0,0.1);
            opacity: 0; transform: translateY(50px);
            transition: all 0.8s cubic-bezier(0.25,0.46,0.45,0.94);
        }
        .step.active { opacity: 1; transform: translateY(0); }

        h1 { font-family: 'Dancing Script', cursive; font-size: 3.5rem; color: #d81b60; margin-bottom: 20px; }
        h2 { font-family: 'Dancing Script', cursive; font-size: 2.8rem; color: #d81b60; margin-bottom: 20px; }

        #displayName, #heartName, #finalName {
            color: #ff4081; font-weight: 700; text-shadow: 0 2px 10px rgba(255,64,129,0.3);
        }

        .btn {
            background: linear-gradient(45deg, #ff4081, #d81b60);
            color: white; border: none; padding: 18px 40px;
            font-size: 1.2rem; font-weight: 600; border-radius: 50px;
            cursor: pointer; transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(255,64,129,0.4);
        }
        .btn:hover {
            transform: translateY(-5px); box-shadow: 0 20px 40px rgba(255,64,129,0.6);
            background: linear-gradient(45deg, #d81b60, #ff4081);
        }

        /* INTERACTIVE HEART - FIXED */
        #interactiveHeart {
            width: 120px; height: 110px; margin: 40px auto;
            background: #ff4081; cursor: pointer; z-index: 30; position: relative;
            animation: heartbeat 1.5s infinite; transition: all 0.3s ease;
            pointer-events: auto !important;
        }
        #interactiveHeart:hover {
            transform: scale(1.2) rotate(10deg);
            box-shadow: 0 0 60px rgba(255,64,129,0.9);
        }
        #interactiveHeart:before, #interactiveHeart:after {
            content: ''; position: absolute; background: #ff4081;
            width: 70px; height: 110px; border-radius: 50px 50px 0 0;
            transform: rotate(-45deg); transform-origin: 0 100%;
        }
        #interactiveHeart:after { transform: rotate(45deg); transform-origin: 100% 100%; left: 50px; }

        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        #heartMessage {
            transform: scale(0.8); opacity: 0;
            transition: all 0.8s cubic-bezier(0.68,-0.55,0.265,1.55);
            margin: 30px 0;
        }
        #heartMessage.show { transform: scale(1); opacity: 1; }

        .message-box {
            background: rgba(255,255,255,0.9); padding: 30px;
            border-radius: 20px; margin: 30px 0; backdrop-filter: blur(10px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }
        .typing-effect { font-size: 1.3rem; line-height: 1.8; color: #333; min-height: 50px; }

        .photo-frame {
            width: 250px; height: 300px; margin: 30px auto; overflow: hidden;
            border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            transition: all 0.5s ease;
        }
        .photo-frame img { width: 100%; height: 100%; object-fit: cover; transition: transform 0.5s; }
        .photo-frame:hover { transform: scale(1.08) rotate(2deg); }
        .photo-frame:hover img { transform: scale(1.15); }

        .memory-container { display: flex; justify-content: center; gap: 30px; flex-wrap: wrap; margin: 30px 0; }
        .polaroid {
            width: 200px; height: 260px; background: white;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2); transform: rotate(-2deg);
            transition: all 0.5s ease; padding: 15px;
        }
        .polaroid:nth-child(2) { transform: rotate(2deg); }
        .polaroid img { width: 100%; height: 200px; object-fit: cover; border-radius: 10px; }
        .polaroid-caption {
            padding-top: 15px; font-weight: 600; color: #d81b60;
        }

        /* FLOATING HEARTS - FIXED */
        @keyframes float-up {
            0% { transform: translateY(0) rotate(0) scale(1); opacity: 1; }
            50% { transform: translateY(-50vh) rotate(180deg) scale(1.3); opacity: 1; }
            100% { transform: translateY(-100vh) rotate(360deg) scale(0.3); opacity: 0; }
        }
        .floating-heart {
            position: absolute; animation: float-up 4s cubic-bezier(0.25,0.46,0.45,0.94) forwards;
            filter: drop-shadow(0 0 15px currentColor); z-index: 15;
        }

        .social-share { margin-top: 40px; display: flex; justify-content: center; gap: 20px; }
        .social-icon {
            width: 60px; height: 60px; border-radius: 50%;
            background: linear-gradient(45deg, #ff4081, #d81b60);
            display: flex; align-items: center; justify-content: center;
            color: white; font-size: 1.5rem; cursor: pointer;
            transition: all 0.3s ease; box-shadow: 0 10px 25px rgba(255,64,129,0.4);
        }
        .social-icon:hover { transform: scale(1.2) rotate(10deg); }

        .signature {
            font-family: 'Dancing Script', cursive; font-size: 2rem;
            color: #ff4081; margin: 30px 0; font-weight: 700;
        }

        @media (max-width: 768px) {
            .container { padding: 80px 15px 20px; }
            h1 { font-size: 2.5rem; }
            h2 { font-size: 2rem; }
            #interactiveHeart { width: 90px; height: 80px; }
            #interactiveHeart:before, #interactiveHeart:after { width: 50px; height: 80px; }
            #interactiveHeart:after { left: 35px; }
            .memory-container { flex-direction: column; align-items: center; }
        }
    </style>
</head>
<body>
    <!-- Particles Background -->
    <div id="particles-js"></div>
    
    <!-- Floating Effects -->
    <div id="floatingHearts"></div>
    <div id="petalsContainer"></div>
    
    <!-- Progress Bar -->
    <div class="progress-bar">
        <div class="progress" id="progressBar"></div>
    </div>

    <div class="container">
        <!-- Step 1: Greeting -->
        <div class="step active" id="step1">
            <h1>Happy Birthday, My Love! üéÇ</h1>
            <p style="font-size: 1.3rem; color: #666; margin-bottom: 40px;">
                I've created something magical just for you, Vaiduu ‚ú®
            </p>
            <img src="https://png.pngtree.com/png-vector/20250422/ourmid/pngtree-cute-girl-holding-birthday-cake-smiling-cheerfully-png-image_16067658.png" 
                 style="width: 200px; height: 200px; border-radius: 50%; box-shadow: 0 20px 40px rgba(0,0,0,0.2); margin-bottom: 30px;">
            <button class="btn" onclick="nextStep()">
                <i class="fas fa-gift"></i> Open Your Gift
            </button>
        </div>

        <!-- Step 2: Interactive Heart -->
        <div class="step" id="step2">
            <h2>For You, <span id="displayName">Vaiduu</span> üíï</h2>
            <p style="font-size: 1.2rem; color: #666; margin-bottom: 20px;">
                Click the heart to feel my love for you! üíñ
            </p>
            <div class="heart" id="interactiveHeart"></div>
            <div id="heartMessage" class="message-box">
                <p style="font-size: 1.3rem; color: #d81b60;">
                    Every beat of my heart whispers your name, <span id="heartName">Vaiduu</span> üíó
                </p>
            </div>
            <button class="btn" onclick="nextStep()">Continue to Your Message</button>
        </div>

        <!-- Step 3: Birthday Message -->
        <div class="step" id="step3">
            <h2>My Special Message For You üíå</h2>
            <div class="photo-frame">
                <img src="https://medias.artmajeur.com/standard/17262319_a-cutel-european-girl-full-bodycartoon-style-illustration-drawn-with-posca-markers-pretty-face-586679414-1.jpg?v=1738402496" alt="Beautiful You">
            </div>
            <div id="typedMessage" class="message-box">
                <p class="typing-effect" id="typingText"></p>
            </div>
            <button class="btn" onclick="nextStep()">See Your Surprise</button>
        </div>

        <!-- Step 4: Memory Lane -->
        <div class="step" id="step4">
            <h2>Our Special Moments üì∏</h2>
            <p style="font-size: 1.2rem; color: #666; margin-bottom: 40px;">
                Some memories I'll cherish forever with you...
            </p>
            <div class="memory-container">
                <div class="polaroid">
                    <img src="https://images.unsplash.com/photo-1518621736915-f3b1c41bfd00?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Memory 1">
                    <div class="polaroid-caption">Our First Date ‚ú®</div>
                </div>
                <div class="polaroid">
                    <img src="https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Memory 2">
                    <div class="polaroid-caption">Summer Days Together ‚òÄÔ∏è</div>
                </div>
            </div>
            <button class="btn" onclick="nextStep()">Your Final Surprise</button>
        </div>

        <!-- Step 5: Final Wish -->
        <div class="step" id="step5">
            <h1>üéâ Happy Birthday, <span id="finalName">Vaiduu üíñ</span>! üéÇ</h1>
            <div class="message-box" style="max-width: 600px; margin: 0 auto 30px;">
                <p style="font-size: 1.4rem; line-height: 1.8; color: #333;">
                    ‚ú® May your day be filled with endless joy, sweet laughter, and all the love your heart can hold ‚ú®<br><br>
                    üåü You light up my world just by being in it ‚Äî like a million stars in my sky üåå<br><br>
                    ‚è≥ Counting every moment until I can hold you and celebrate this magical day together! ü•∞
                </p>
            </div>
            <p style="font-size: 1.5rem; color: #d81b60; font-weight: 600;">
                üíå With all my love, forever and always... üí´
            </p>
            <div class="signature">Yours truly, üíã</div>
            <div class="social-share">
                <div class="social-icon" onclick="shareOnSocial('facebook')" title="Facebook">
                    <i class="fab fa-facebook-f"></i>
                </div>
                <div class="social-icon" onclick="shareOnSocial('twitter')" title="Twitter">
                    <i class="fab fa-twitter"></i>
                </div>
                <div class="social-icon" onclick="shareOnSocial('whatsapp')" title="WhatsApp">
                    <i class="fab fa-whatsapp"></i>
                </div>
            </div>
        </div>
    </div>

    <script>
        // FIXED: All variables
        const userName = "Vaiduu";
        let currentStep = 1;
        const totalSteps = 5;

        // Particles.js - Romantic pink
        particlesJS("particles-js", {
            particles: {
                number: { value: 50, density: { enable: true, value_area: 800 } },
                color: { value: "#ff4081" },
                shape: { type: "circle" },
                opacity: { value: 0.6, random: true, anim: { enable: true, speed: 1, opacity_min: 0.1 } },
                size: { value: 6, random: true, anim: { enable: true, speed: 2, size_min: 0.1 } },
                line_linked: { enable: true, distance: 150, color: "#f8bbd0", opacity: 0.4, width: 1.5 },
                move: { enable: true, speed: 2, direction: "none", random: true, straight: false, out_mode: "out" }
            },
            interactivity: {
                detect_on: "canvas",
                events: { onhover: { enable: true, mode: "grab" }, onclick: { enable: true, mode: "push" }, resize: true },
                modes: { grab: { distance: 160, line_linked: { opacity: 1 } }, push: { particles_nb: 6 } }
            },
            retina_detect: true
        });

        // FIXED: Initialize everything
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                // Set Vaiduu everywhere
                document.getElementById('displayName').textContent = userName;
                document.getElementById('heartName').textContent = userName;
                document.getElementById('finalName').textContent = userName;

                // FIXED: Heart click - DIRECT onclick
                document.getElementById('interactiveHeart').onclick = function(e) {
                    e.stopPropagation();
                    createHearts();
                    document.getElementById('heartMessage').classList.add('show');
                    return false;
                };

                showStep(currentStep);
                createPetals();
            }, 500);
        });

        function showStep(step) {
            document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
            document.getElementById(`step${step}`).classList.add('active');
            
            const progressPercentage = ((step - 1) / (totalSteps - 1)) * 100;
            gsap.to("#progressBar", {width: `${progressPercentage}%`, duration: 1, ease: "power2.out"});
            
            switch(step) {
                case 2: gsap.from("#interactiveHeart", {scale: 0.5, rotation: 180, duration: 1.2, ease: "elastic.out(1,0.5)"}); break;
                case 3: typeMessage(); gsap.from(".photo-frame", {y: 50, rotation: -10, opacity: 0, duration: 1.2, ease: "back.out(1.7)"}); break;
                case 4: gsap.from(".polaroid", {y: 100, opacity: 0, stagger: 0.2, duration: 1.2, ease: "back.out(1.7)"}); break;
                case 5: createFireworks(); break;
            }
        }

        function nextStep() {
            if (currentStep < totalSteps) {
                currentStep++;
                showStep(currentStep);
            }
        }

        // FIXED: Working heart animation
        function createHearts() {
            const container = document.getElementById('floatingHearts');
            const colors = ['#ff4081', '#f06292', '#d81b60', '#ff1744', '#ff80ab'];
            
            for (let i = 0; i < 40; i++) {
                const heart = document.createElement('div');
                heart.className = 'floating-heart';
                heart.innerHTML = 'üíñ';
                heart.style.cssText = `
                    left: ${Math.random() * 90}% !important;
                    top: 70% !important;
                    color: ${colors[Math.floor(Math.random() * colors.length)]} !important;
                    font-size: ${25 + Math.random() * 30}px !important;
                    z-index: 25 !important;
                    pointer-events: none !important;
                    animation-duration: ${3.5 + Math.random() * 2.5}s !important;
                    filter: drop-shadow(0 0 15px currentColor) !important;
                `;
                container.appendChild(heart);
                setTimeout(() => heart.remove(), 6000);
            }
            
            const heartEl = document.getElementById('interactiveHeart');
            gsap.to(heartEl, {scale: 1.3, duration: 0.3, yoyo: true, repeat: 1});
        }

        function createPetals() {
            const container = document.getElementById('petalsContainer');
            const petalColors = ['#ffcdd2', '#f8bbd0', '#fce4ec', '#f48fb1'];
            
            for (let i = 0; i < 20; i++) {
                const petal = document.createElement('div');
                petal.className = 'petal';
                petal.style.cssText = `
                    position: absolute; width: ${12 + Math.random() * 15}px;
                    height: ${12 + Math.random() * 15}px; left: ${Math.random() * 100}%;
                    background: ${petalColors[Math.floor(Math.random() * petalColors.length)]};
                    border-radius: 50% 0 50% 0; opacity: 0.8; top: -20px;
                `;
                container.appendChild(petal);
                gsap.to(petal, {
                    y: window.innerHeight + 50, x: `+=${40 + Math.random() * 80}`,
                    rotation: 720, duration: 12 + Math.random() * 8, ease: "none",
                    repeat: -1, delay: Math.random() * 5
                });
            }
        }

        function typeMessage() {
            const messages = [
                `Dear ${userName},`, "On your special day, I want you to know...",
                "You are the most amazing person I've ever met üíï",
                "Your smile brightens my darkest days ‚ú®", "Your laugh is my favorite sound üíñ",
                "Your love gives me strength and happiness üåü", "I'm so grateful to have you in my life ü•∞",
                "May this year bring you all the joy you deserve üéâ",
                "You deserve the world and more üåç", "Happy Birthday, my love! üíù"
            ];
            const typingText = document.getElementById('typingText');
            let msgIndex = 0, charIndex = 0, isDeleting = false, speed = 100;
            
            function type() {
                const currentMsg = messages[msgIndex];
                if (isDeleting) {
                    typingText.innerHTML = currentMsg.substring(0, charIndex - 1);
                    charIndex--; speed = 30;
                } else {
                    typingText.innerHTML = currentMsg.substring(0, charIndex + 1);
                    charIndex++; speed = 80;
                }
                if (!isDeleting && charIndex === currentMsg.length) {
                    isDeleting = true; speed = 1500;
                } else if (isDeleting && charIndex === 0) {
                    isDeleting = false; msgIndex = (msgIndex + 1) % messages.length; speed = 500;
                }
                setTimeout(type, speed);
            }
            setTimeout(() => { document.getElementById('typedMessage').classList.add('show'); type(); }, 500);
        }

        function createFireworks() {
            for (let i = 0; i < 10; i++) {
                setTimeout(() => createFirework(), i * 600);
            }
        }

        function createFirework() {
            const colors = ['#ff4081', '#f06292', '#d81b60', '#ff80ab'];
            const firework = document.createElement('div');
            firework.style.cssText = `
                position: fixed; width: 6px; height: 6px; background: ${colors[Math.floor(Math.random()*colors.length)]};
                left: ${Math.random()*98}vw; top: ${Math.random()*70}vh; border-radius: 50%;
                box-shadow: 0 0 20px currentColor; z-index: 50; pointer-events: none;
                animation: explode 1.5s ease-out forwards;
            `;
            document.body.appendChild(firework);
            setTimeout(() => firework.remove(), 1500);
        }

        function shareOnSocial(platform) {
            const text = `Check out this beautiful birthday wish for ${userName}! üéâüíñ ${window.location.href}`;
            const urls = {
                facebook: `https://www.facebook.com/sharer.php?u=${encodeURIComponent(window.location.href)}`,
                twitter: `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`,
                whatsapp: `https://wa.me/?text=${encodeURIComponent(text)}`
            };
            window.open(urls[platform], '_blank', 'width=600,height=400');
        }
    </script>
</body>
</html>
